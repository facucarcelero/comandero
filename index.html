<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Software Comandero TPV (Offline)</title>
  <link rel="stylesheet" href="./css/ui.css"/>
</head>
<body class="bg-slate-100 text-slate-800">
  <div id="app-container" class="flex h-screen">
    <aside class="sidebar">
      <div class="sidebar-header">
        <svg class="icon indigo" viewBox="0 0 24 24"><path d="M4 3h16v4H4zM4 10h16v4H4zM4 17h16v4H4z"/></svg>
        <span class="brand">Comandero</span>
      </div>
      <nav class="sidebar-nav">
        <a href="#pos" class="nav-link" data-page="pos"><svg class="icon" viewBox="0 0 24 24"><path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"/></svg><span>Tomar Pedido</span></a>
        <a href="#inventory" class="nav-link" data-page="inventory"><svg class="icon" viewBox="0 0 24 24"><path d="M3 7l9-4 9 4-9 4-9-4zM3 17l9 4 9-4M3 12l9 4 9-4"/></svg><span>Inventario</span></a>
        <a href="#cash-register" class="nav-link" data-page="cash-register"><svg class="icon" viewBox="0 0 24 24"><path d="M3 10h18v10H3zM7 10V6h10v4"/></svg><span>Caja</span></a>
        <a href="#reports" class="nav-link" data-page="reports"><svg class="icon" viewBox="0 0 24 24"><path d="M3 3v18h18M7 13v5M12 8v10M17 11v7"/></svg><span>Reportes</span></a>
      </nav>
      <div class="sidebar-footer"><p class="muted">ID de Sesión:</p><p id="session-id" class="mono"></p></div>
    </aside>
    <main class="main">
      <header class="header shadow">
        <h1 id="page-title" class="title">Tomar Pedido</h1>
        <div id="cash-status-indicator" class="status">
          <span class="ping red"></span><span class="dot red"></span>
          <span id="cash-status-text" class="status-text red">Caja Cerrada</span>
        </div>
      </header>
      <div class="content">
        <section id="page-pos" class="page active">
          <div class="grid-3">
            <div class="span-2">
              <div class="input-icon">
                <svg class="icon sm muted" viewBox="0 0 24 24"><path d="M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm10 2-6-6"/></svg>
                <input id="product-search" placeholder="Buscar producto..." />
              </div>
              <div id="product-grid" class="grid-4 gap"></div>
            </div>
            <div class="card">
              <h2 class="card-title">Pedido Actual</h2>
              <div id="order-items" class="order-items"><p class="placeholder">Agregue productos al pedido</p></div>
              <div class="divider"></div>
              <div class="flex between center"><span class="total-label">Total:</span><span id="order-total" class="total-value">$0.00</span></div>
              <div class="flex gap mt"><button id="clear-order-btn" class="btn ghost">Limpiar</button><button id="process-order-btn" class="btn primary" disabled>Cobrar</button></div>
            </div>
          </div>
        </section>
        <section id="page-inventory" class="page">
          <div class="card">
            <div class="flex between center mb"><h2 class="card-title">Gestión de Inventario</h2><button id="add-product-btn" class="btn primary"><svg class="icon sm" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>Añadir Producto</button></div>
            <div class="table-wrap"><table class="table"><thead><tr><th>Nombre</th><th>Categoría</th><th>Precio</th><th>Stock</th><th>Acciones</th></tr></thead><tbody id="inventory-table-body"></tbody></table></div>
          </div>
        </section>
        <section id="page-cash-register" class="page">
          <div class="card">
            <h2 class="card-title">Gestión de Caja</h2>
            <div id="cash-closed-view" class="centered"><h3>Caja cerrada</h3><p class="muted">Para empezar a registrar ventas, abrí la caja.</p><button id="open-register-btn" class="btn success">Abrir Caja</button></div>
            <div id="cash-open-view" class="hidden">
              <div class="grid-3 gap">
                <div class="stat"><span class="muted sm">Monto Inicial</span><p id="initial-cash" class="stat-v">$0.00</p></div>
                <div class="stat"><span class="muted sm">Ventas Registradas</span><p id="sales-total" class="stat-v">$0.00</p></div>
                <div class="stat"><span class="muted sm">Total en Caja</span><p id="expected-cash" class="stat-v">$0.00</p></div>
              </div>
              <h3 class="mt">Transacciones del Día</h3>
              <div id="transactions-list" class="scrollbox"></div>
              <div class="right mt"><button id="close-register-btn" class="btn danger">Cerrar Caja</button></div>
            </div>
          </div>
        </section>
        <section id="page-reports" class="page">
          <div class="card">
            <div class="flex between center mb"><h2 class="card-title">Reportes de Cierres de Caja</h2><input type="date" id="report-date-picker" class="input"/></div>
            <div id="reports-container" class="stack"><p class="placeholder center">Seleccione una fecha para ver el reporte.</p></div>
          </div>
        </section>
      </div>
    </main>
  </div>
  <div id="product-modal" class="backdrop hidden"><div class="modal"><h2 id="modal-title" class="card-title mb">Añadir Nuevo Producto</h2><form id="product-form"><input type="hidden" id="product-id"><label class="lbl">Nombre<input id="product-name" required></label><label class="lbl">Categoría<input id="product-category" required></label><div class="grid-2 gap"><label class="lbl">Precio<input id="product-price" type="number" min="0" step="0.01" required></label><label class="lbl">Stock<input id="product-stock" type="number" min="0" required></label></div><div class="right mt gap"><button type="button" id="cancel-product-modal" class="btn ghost">Cancelar</button><button type="submit" class="btn primary">Guardar</button></div></form></div></div>
  <div id="open-register-modal" class="backdrop hidden"><div class="modal sm"><h2 class="card-title mb">Abrir Caja</h2><form id="open-register-form"><label class="lbl">Monto inicial en caja<input id="initial-amount" type="number" min="0" step="0.01" required placeholder="0.00"></label><div class="right mt gap"><button type="button" id="cancel-open-register" class="btn ghost">Cancelar</button><button type="submit" class="btn success">Confirmar Apertura</button></div></form></div></div>
  <div id="close-register-modal" class="backdrop hidden"><div class="modal sm"><h2 class="card-title mb">Cerrar Caja</h2><form id="close-register-form"><div class="mb"><span class="muted sm">Total esperado</span><p id="close-expected-total" class="stat-v">$0.00</p></div><label class="lbl">Monto final contado<input id="counted-amount" type="number" min="0" step="0.01" required placeholder="0.00"></label><div id="cash-difference" class="center mt"></div><div class="right mt gap"><button type="button" id="cancel-close-register" class="btn ghost">Cancelar</button><button type="submit" class="btn danger">Confirmar Cierre</button></div></form></div></div>
  <div id="toast" class="toast"><p id="toast-message"></p></div>
  <script src="./js/app-ui.js"></script>

  <!-- Payment Modal -->
  <div id="payment-modal" class="backdrop hidden">
    <div class="modal sm">
      <h2 class="card-title mb">Seleccionar medio de pago</h2>
      <div class="grid-2 gap">
        <button class="btn primary pay-opt" data-pay="cash">Efectivo</button>
        <button class="btn primary pay-opt" data-pay="debit">Débito</button>
        <button class="btn primary pay-opt" data-pay="credit">Crédito</button>
        <button class="btn primary pay-opt" data-pay="mp">Mercado Pago</button>
        <button class="btn primary pay-opt" data-pay="other">Otro</button>
      </div>
      <div class="right mt">
        <button id="cancel-payment" class="btn ghost">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Kitchen print-only area -->
  <div id="kitchen-print" class="kitchen-print"></div>

</body>
</html>
